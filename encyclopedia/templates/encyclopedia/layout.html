{% load static %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <title>{% block title %}Wiki{% endblock %}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-for-awesome/6.0.0/css/all.min.css">
        <link href="{% static 'encyclopedia/styles.css' %}" rel="stylesheet">
    </head>
    <body>
        <div class="container-fluid">
            <div class="row min-vh-100 main-row">
                
                <div class="col-md-3 col-lg-2 sidebar">
                    <div class="logo-container">
                        <img src="{% static 'encyclopedia/logo.png' %}" alt="Wiki Logo" class="logo-img">
                        <h2 class="site-title">উইকি(Wiki)</h2>
                    </div>

                    <form action="{% url 'search' %}" class="search-form" method="get">
                        <input class="search-input" type="text" name="q" placeholder="Search Encyclopedia" required>
                        <button class="btn btn-search" type="submit">
                            <i class="fas fa-search"></i> Search
                        </button>
                    </form>

                    <form action="{% url 'generate_image' %}" class="ai-search-form" method="get">
                        <input class="search-input" type="text" name="prompt" placeholder="AI Image prompt" required>
                        <button class="btn btn-ai" type="submit">
                            <i class="fas fa-wand-magic-sparkles"></i> Generate
                        </button>
                        <small class="text-muted d-block text-center mt-1">AI Image Generator</small>
                    </form>

                    <div class="nav-links">
                        <a href="{% url 'index' %}" class="nav-link">
                            <i class="fas fa-home"></i> Home
                        </a>
                        {% if user.is_authenticated %}
                            <a href="{% url 'new_page' %}" class="nav-link">
                                <i class="fas fa-plus-circle"></i> Create New Page
                            </a>
                        {% else %}
                            <a href="{% url 'login' %}" class="nav-link">
                                <i class="fas fa-edit"></i> Login to Edit
                            </a>
                        {% endif %}
                        <a href="{% url 'random_page' %}" class="nav-link">
                            <i class="fas fa-random"></i> Random Page
                        </a>
                    </div>

                    <div class="user-section">
                        <p class="text-center text-muted small mb-2">
                            {% if user.is_authenticated %}Editor{% else %}Visitor{% endif %}
                        </p>
                        {% if user.is_authenticated %}
                            <div class="d-flex align-items-center mb-3 justify-content-center">
                                <i class="fas fa-user-circle fa-2x mr-2 text-primary"></i>
                                <strong>{{ user.username }}</strong>
                            </div>
                            <a href="{% url 'logout' %}" class="btn btn-search" style="background: #ef4444 !important;">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </a>
                        {% else %}
                            <a href="{% url 'login' %}" class="btn btn-search mb-2">
                                <i class="fas fa-sign-in-alt"></i> Login
                            </a>
                            <a href="{% url 'register' %}" class="btn btn-edit">
                                <i class="fas fa-user-plus"></i> Register
                            </a>
                        {% endif %}
                    </div>
                </div>

                <div class="col-md-9 col-lg-10 main-content">
                    <div class="content-wrapper">
                        {% block body %}
                        {% endblock %}
                    </div>
                </div>

            </div>
        </div>
    </body>
</html>
